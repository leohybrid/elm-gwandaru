{"version":3,"file":"locale-datetime-577ae0c6.js","sources":["../../../_javascript/modules/components/locale-datetime.js"],"sourcesContent":["/**\r\n * Update month/day to locale datetime\r\n *\r\n * Requirement: <https://github.com/iamkun/dayjs>\r\n */\r\n\r\n/* A tool for locale datetime */\r\nclass LocaleHelper {\r\n  static get attrTimestamp() {\r\n    return 'data-ts';\r\n  }\r\n\r\n  static get attrDateFormat() {\r\n    return 'data-df';\r\n  }\r\n\r\n  static get locale() {\r\n    return document.documentElement.getAttribute('lang').substring(0, 2);\r\n  }\r\n\r\n  static getTimestamp(elem) {\r\n    return Number(elem.getAttribute(this.attrTimestamp)); // unix timestamp\r\n  }\r\n\r\n  static getDateFormat(elem) {\r\n    return elem.getAttribute(this.attrDateFormat);\r\n  }\r\n}\r\n\r\nexport function initLocaleDatetime() {\r\n  dayjs.locale(LocaleHelper.locale);\r\n  dayjs.extend(window.dayjs_plugin_localizedFormat);\r\n\r\n  document\r\n    .querySelectorAll(`[${LocaleHelper.attrTimestamp}]`)\r\n    .forEach((elem) => {\r\n      const date = dayjs.unix(LocaleHelper.getTimestamp(elem));\r\n      const text = date.format(LocaleHelper.getDateFormat(elem));\r\n      elem.textContent = text;\r\n      elem.removeAttribute(LocaleHelper.attrTimestamp);\r\n      elem.removeAttribute(LocaleHelper.attrDateFormat);\r\n\r\n      // setup tooltips\r\n      if (\r\n        elem.hasAttribute('data-bs-toggle') &&\r\n        elem.getAttribute('data-bs-toggle') === 'tooltip'\r\n      ) {\r\n        // see: https://day.js.org/docs/en/display/format#list-of-localized-formats\r\n        const tooltipText = date.format('llll');\r\n        elem.setAttribute('data-bs-title', tooltipText);\r\n      }\r\n    });\r\n}\r\n"],"names":["LocaleHelper","_createClass","_classCallCheck","key","get","document","documentElement","getAttribute","substring","value","elem","Number","this","attrTimestamp","attrDateFormat","initLocaleDatetime","dayjs","locale","extend","window","dayjs_plugin_localizedFormat","querySelectorAll","concat","forEach","date","unix","getTimestamp","text","format","getDateFormat","textContent","removeAttribute","hasAttribute","tooltipText","setAttribute"],"mappings":"mEAMA,IACMA,EAAY,WAAA,OAAAC,EAAA,SAAAD,IAAAE,OAAAF,EAAA,EAAA,KAAA,CAAA,CAAAG,IAAA,gBAAAC,IAChB,WACE,MAAO,SACT,GAAC,CAAAD,IAAA,iBAAAC,IAED,WACE,MAAO,SACT,GAAC,CAAAD,IAAA,SAAAC,IAED,WACE,OAAOC,SAASC,gBAAgBC,aAAa,QAAQC,UAAU,EAAG,EACpE,GAAC,CAAAL,IAAA,eAAAM,MAED,SAAoBC,GAClB,OAAOC,OAAOD,EAAKH,aAAaK,KAAKC,eACvC,GAAC,CAAAV,IAAA,gBAAAM,MAED,SAAqBC,GACnB,OAAOA,EAAKH,aAAaK,KAAKE,eAChC,IAAC,CAnBe,GAsBX,SAASC,IACdC,MAAMC,OAAOjB,EAAaiB,QAC1BD,MAAME,OAAOC,OAAOC,8BAEpBf,SACGgB,iBAAgBC,IAAAA,OAAKtB,EAAaa,cAAa,MAC/CU,QAAQ,SAACb,GACR,IAAMc,EAAOR,MAAMS,KAAKzB,EAAa0B,aAAahB,IAC5CiB,EAAOH,EAAKI,OAAO5B,EAAa6B,cAAcnB,IAMpD,GALAA,EAAKoB,YAAcH,EACnBjB,EAAKqB,gBAAgB/B,EAAaa,eAClCH,EAAKqB,gBAAgB/B,EAAac,gBAIhCJ,EAAKsB,aAAa,mBACsB,YAAxCtB,EAAKH,aAAa,kBAClB,CAEA,IAAM0B,EAAcT,EAAKI,OAAO,QAChClB,EAAKwB,aAAa,gBAAiBD,EACrC,CACF,EACJ"}